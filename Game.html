<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ZzZstile Ø¬Ù…â€ŒØ®ÙˆØ±</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Tahoma, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    #leaderboard {
      background:#222;
      color:#fff;
      padding:10px;
      border-bottom:2px solid lime;
    }
    #leaderboard table {
      width:100%;
      font-size:14px;
      border-collapse:collapse;
    }
    #leaderboard th, #leaderboard td {
      padding:4px;
    }
    #gameArea {
      position: relative;
      height: 400px;
      background-color: #222;
      overflow: hidden;
    }
    #player {
      width: 50px;
      height: 50px;
      background-color: lime;
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 50%;
    }
    .gem, .obstacle {
      width: 30px;
      height: 30px;
      position: absolute;
      top: 0;
      border-radius: 50%;
    }
    .gem { background-color: cyan; }
    .obstacle { background-color: red; }
    #controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    .promo a {
      color: #0ff;
      font-weight: bold;
      font-size: 18px;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0.4; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>

<div id="leaderboard">
  <h3>ğŸ† Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ± ZzZstile</h3>
  <table>
    <tr style="background:#333;">
      <th>Ù†Ø§Ù…</th>
      <th>Ø§Ù…ØªÛŒØ§Ø²</th>
      <th>Ù…Ø¯Ø§Ù„</th>
    </tr>
    <tr><td>AMIR</td><td>180</td><td>ğŸ¥‡ Ø·Ù„Ø§ÛŒÛŒ</td></tr>
    <tr><td>Ø³Ø§Ø±Ø§</td><td>150</td><td>ğŸ¥ˆ Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ</td></tr>
    <tr><td>Ø±Ø¶Ø§</td><td>120</td><td>ğŸ¥‰ Ø¨Ø±Ù†Ø²ÛŒ</td></tr>
    <tr><td>Ù†Ø§Ø²Ù†ÛŒÙ†</td><td>90</td><td>âšª Ø¨Ø¯ÙˆÙ† Ù…Ø¯Ø§Ù„</td></tr>
  </table>
</div>

<h2>ğŸ® Ø¨Ø§Ø²ÛŒ ZzZstile Ø¬Ù…â€ŒØ®ÙˆØ±</h2>
<p>Ø­Ø±Ú©Øª Ú©Ù†ØŒ Ø¬Ù… Ø¨Ú¯ÛŒØ±ØŒ Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø²Ù†ØŒ Ú©Ø¯ ØªØ®ÙÛŒÙ Ø¨Ú¯ÛŒØ±!</p>
<button onclick="startGame()">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
<div id="timer">â± Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: <span id="timeValue">90</span> Ø«Ø§Ù†ÛŒÙ‡</div>
<div id="gameArea"><div id="player"></div></div>
<div id="controls">
  <button onmousedown="moveLeft()" ontouchstart="moveLeft()">â¬…ï¸ Ú†Ù¾</button>
  <button onmousedown="moveRight()" ontouchstart="moveRight()">â¡ï¸ Ø±Ø§Ø³Øª</button>
</div>
<p>Ø§Ù…ØªÛŒØ§Ø²: <span id="scoreValue">0</span></p>
<div id="result"></div>
<div class="promo">
  <p>ğŸ“º Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†:</p>
  <a href="https://rubika.ir/ZzZstile" target="_blank">Ø±ÙˆØ¨ÛŒÚ©Ø§: ZzZstile</a><br>
  <a href="https://www.aparat.com/ZzZ0stile" target="_blank">Ø¢Ù¾Ø§Ø±Ø§Øª: ZzZstile</a>
</div>
<form id="scoreForm" action="https://formspree.io/f/mvgbvraz" method="POST" style="display:none;">
  <input type="hidden" name="name" id="nameInput">
  <input type="hidden" name="score" id="scoreInput">
  <input type="hidden" name="code" id="codeInput">
  <input type="hidden" name="time" id="timeInput">
  <input type="submit" value="Ø§Ø±Ø³Ø§Ù„">
</form>

<script>
let score = 0;
let timeLeft = 90;
let gameInterval;
let timerInterval;
let moveInterval;
const player = document.getElementById("player");
const scoreDisplay = document.getElementById("scoreValue");
const timeDisplay = document.getElementById("timeValue");

function startGame() {
  document.querySelector("button").style.display = "none";
  gameInterval = setInterval(spawnItem, 1000);
  timerInterval = setInterval(() => {
    timeLeft--;
    timeDisplay.textContent = timeLeft;
    if (timeLeft <= 0) endGame();
  }, 1000);
}

function spawnItem() {
  const item = document.createElement("div");
  const isGem = Math.random() > 0.3;
  item.className = isGem ? "gem" : "obstacle";
  item.style.left = Math.random() * window.innerWidth + "px";
  document.body.appendChild(item);

  let topPos = 0;
  const fall = setInterval(() => {
    topPos += 5;
    item.style.top = topPos + "px";
    const playerRect = player.getBoundingClientRect();
    const itemRect = item.getBoundingClientRect();

    if (
      itemRect.top < playerRect.bottom &&
      itemRect.bottom > playerRect.top &&
      itemRect.left < playerRect.right &&
      itemRect.right > playerRect.left
    ) {
      if (isGem) {
        score += 10;
      } else {
        score -= 10;
      }
      scoreDisplay.textContent = score;
      item.remove();
      clearInterval(fall);
      if (score >= 100) endGame();
    }

    if (topPos > window.innerHeight) {
      item.remove();
      clearInterval(fall);
    }
  }, 50);
}

function moveLeft() {
  clearInterval(moveInterval);
  moveInterval = setInterval(() => {
    let left = player.offsetLeft;
    if (left > 0) player.style.left = (left - 10) + "px";
  }, 50);
}

function moveRight() {
  clearInterval(moveInterval);
  moveInterval = setInterval(() => {
    let left = player.offsetLeft;
    if (left < window.innerWidth - player.offsetWidth)
      player.style.left = (left + 10) + "px";
  }, 50);
}

document.addEventListener("mouseup", () => clearInterval(moveInterval));
document.addEventListener("touchend", () => clearInterval(moveInterval));

function endGame() {
  clearInterval(gameInterval);
  clearInterval(timerInterval);

  const name = prompt("Ø§Ø³Ù… Ø®ÙˆØ¯ØªÙˆ ÙˆØ§Ø±Ø¯ Ú©Ù†:");
  const code = score >= 100 ? "ZZZ-" + score + "-" + Math.floor(Math.random() * 1000) : "Ø¨Ø¯ÙˆÙ† Ú©Ø¯";
  const now = new Date().toLocaleString("fa-IR");

  document.getElementById("result").innerHTML = `
    ğŸ ${score >= 100 ? "Ø¢ÙØ±ÛŒÙ†" : "Ù…ØªØ£Ø³ÙØ§Ù†Ù‡"} ${name}!<br>
    Ø§Ù…ØªÛŒØ§Ø²: ${score}<br>
    ${score >= 100 ? `Ú©Ø¯ ØªØ®ÙÛŒÙ: <b>${code}</b><br><a href="https://zzzstile.ir/order?code=${code}" target="_blank" style="color:lime;">ğŸ›’ Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ø¨Ø§ Ú©Ø¯</a>` : "Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯ØŒ Ø§Ù…ØªÛŒØ§Ø²Øª Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ù„Ø§ÛŒ Û±Û°Û° Ø¨Ø§Ø´Ù‡!"}
  `;

  document.getElementById("nameInput").value = name;
  document.getElementById("scoreInput").value = score;
  document.getElementById("codeInput").value = code;
  document.getElementById("timeInput").value = now;
  document.getElementById("scoreForm").submit();

  if (score >= 100) {
    setTimeout(() => {
      window.location.href = "https://zzzstile.ir/leaderboard?name=" + encodeURIComponent(name) + "&score=" + score + "&code=" + code;
    }, 3000);
  }
}
</script>

</body>
</html>